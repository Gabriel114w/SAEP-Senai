# 4. Documentação das Interfaces do Sistema

## 4. Interface de Login

A interface de login é o ponto de acesso inicial ao sistema, garantindo a segurança e o controle de acesso baseado no perfil do usuário (RF01).

### Campos

| Campo | Tipo | Obrigatório | Descrição |
| :--- | :--- | :--- | :--- |
| **E-mail/Usuário** | Texto | Sim | E-mail cadastrado do usuário. |
| **Senha** | Senha | Sim | Senha secreta do usuário. |
| **Botão** | Ação | Sim | "Entrar" |

### Validações

1.  **Obrigatoriedade:** Ambos os campos (E-mail/Usuário e Senha) devem ser preenchidos.
2.  **Formato:** O campo E-mail/Usuário deve seguir um formato de e-mail válido (ex: `usuario@dominio.com`).
3.  **Credenciais:** As credenciais fornecidas devem corresponder a um registro ativo na tabela `USUARIO`.

### Mensagens de Erro

*   **Campos Vazios:** "Por favor, preencha seu e-mail e senha para continuar."
*   **Credenciais Inválidas:** "E-mail e/ou senha inválidos. Tente novamente."
*   **Bloqueio (Opcional):** "Sua conta foi temporariamente bloqueada após múltiplas tentativas falhas. Contate o administrador."

### Fluxo de Login

| Cenário | Ação do Usuário | Validação | Resultado Esperado |
| :--- | :--- | :--- | :--- |
| **Login Válido** | Insere credenciais corretas e clica em "Entrar". | Sucesso na autenticação. | Redirecionamento para a **Interface Principal** (Dashboard). |
| **Login Inválido** | Insere credenciais incorretas ou deixa campos vazios. | Falha na autenticação. | Exibição da mensagem de erro correspondente na tela. |

---

## 5. Interface Principal (Dashboard)

Após o login, o usuário é direcionado para a Interface Principal, que atua como um painel de controle (Dashboard) com informações resumidas e acesso rápido às funcionalidades do sistema.

### Informações Exibidas (KPIs)

As informações exibidas no dashboard variam ligeiramente conforme o perfil do usuário, mas incluem:

| Informação | Perfil | Descrição |
| :--- | :--- | :--- |
| **Boas-vindas** | Todos | Mensagem personalizada (ex: "Bem-vindo(a), João Mecânico!"). |
| **Alertas Ativos** | Todos | Lista ou contagem de veículos próximos da revisão (RF06). |
| **Total de Veículos** | Admin, Mecânico | Número total de veículos cadastrados na frota. |
| **Manutenções Pendentes** | Admin, Mecânico | Contagem de agendamentos de manutenção ainda não concluídos (RF10). |
| **Custo Total (Mês)** | Admin | Soma dos custos de manutenção registrados no mês atual (RF08). |

### Menus de Navegação

O menu de navegação lateral ou superior deve ser adaptativo ao perfil:

| Menu | Perfil de Acesso | Funcionalidade |
| :--- | :--- | :--- |
| **Dashboard** | Todos | Retorna à tela principal. |
| **Veículos** | Admin, Mecânico | Acesso ao Cadastro de Veículos (RF02). |
| **Manutenções** | Admin, Mecânico | Acesso ao Controle de Manutenção (RF03, RF04). |
| **Relatórios** | Admin | Acesso à Geração de Relatórios (RF07, RF08). |
| **Usuários** | Admin | Acesso à Gestão de Usuários (RF09). |
| **Meu Perfil** | Todos | Edição de dados pessoais e senha. |

---

## 6. Interface de Cadastro de Veículos

Esta interface permite o gerenciamento completo da frota (RF02).

### Campos Obrigatórios

| Campo | Tipo | Descrição | Exemplo |
| :--- | :--- | :--- | :--- |
| **Placa** | Texto | Identificador único do veículo. | `ABC1234` |
| **Marca** | Texto | Fabricante do veículo. | `Volvo` |
| **Modelo** | Texto | Modelo específico do veículo. | `FH 540` |
| **Ano** | Número | Ano de fabricação. | `2022` |
| **Quilometragem Atual (KM)** | Número | Quilometragem atual do hodômetro (RF05). | `55000` |
| **KM Próxima Revisão** | Número | Quilometragem programada para a próxima manutenção preventiva. | `60000` |

### Funcionalidades

*   **Listagem:** Tabela paginada com todos os veículos, permitindo busca e filtro por placa, marca ou modelo.
*   **Novo Cadastro:** Formulário para inserção de um novo veículo.
*   **Edição:** Formulário pré-preenchido para alteração dos dados de um veículo existente.
*   **Exclusão:** Opção para remover um veículo (requer confirmação).

### Lógica de Validação

*   **Placa Única:** O sistema deve impedir a duplicação de placas. Ao tentar cadastrar ou editar um veículo com uma placa já existente, deve exibir a mensagem: "Erro: A placa **[Placa Inserida]** já está cadastrada no sistema."
*   **KM Próxima Revisão:** O valor deve ser sempre maior que a **Quilometragem Atual**.
*   **Campos Numéricos:** Quilometragem e Ano devem aceitar apenas números inteiros positivos.

---

## 7. Interface de Controle de Manutenção

Esta interface é utilizada para registrar manutenções e gerenciar os alertas de revisão (RF03, RF04, RF06).

### Cadastro de Manutenções

O formulário de registro de manutenção deve ser acessado a partir da lista de veículos ou do menu principal.

| Campo | Tipo | Obrigatório | Descrição |
| :--- | :--- | :--- | :--- |
| **Veículo** | Dropdown/Busca | Sim | Seleção do veículo pela Placa ou ID. |
| **Mecânico** | Dropdown | Sim | Seleção do usuário com perfil "Mecânico" que realizou o serviço. |
| **Tipo** | Radio Button | Sim | Opções: **Preventiva** (RF03) ou **Corretiva** (RF04). |
| **Data da Manutenção** | Data | Sim | Data em que o serviço foi concluído. |
| **KM no Serviço** | Número | Sim | Quilometragem exata do veículo no momento da manutenção (deve ser validada para ser próxima da KM Atual). |
| **Custo (R$)** | Decimal | Sim | Custo total da manutenção (peças + mão de obra) (RF08). |
| **Descrição** | Área de Texto | Sim | Detalhes do serviço, peças trocadas ou problema corrigido. |

### Lógica de Alerta de Revisão (RF06)

O sistema deve executar uma rotina de verificação (preferencialmente noturna ou a cada atualização de KM) para gerar ou atualizar a tabela `ALERTA`.

1.  **Cálculo da Diferença:** Para cada veículo, o sistema calcula a diferença: `Diferença = KM Próxima Revisão - Quilometragem Atual`.
2.  **Geração do Alerta:**
    *   Se `Diferença <= 1000 km` (margem de segurança definida), um novo registro de alerta é criado ou o status de um alerta existente é atualizado para **Ativo** na tabela `ALERTA`.
    *   A mensagem deve ser clara: "Veículo **[Placa]** está a **[Diferença]** km da revisão de **[KM Próxima Revisão]** km."
3.  **Exibição:** O Dashboard (Interface Principal) exibe todos os alertas com status **Ativo**.
4.  **Resolução:** Após o registro de uma nova manutenção preventiva, o sistema deve:
    *   Atualizar a `Quilometragem Atual` do veículo.
    *   Calcular e atualizar a `KM Próxima Revisão` (ex: `KM no Serviço + 10000 km`).
    *   Mudar o status do alerta de revisão anterior para **Resolvido**.
